<div class="relative mx-12 flex flex-col items-center justify-center">
    <h1 class="text-xl">
        Enter Hua's Doodle-Dazzled <span id="scribble" class="font-bold"
            >Digital Universe!</span
        >
    </h1>
    <div class="relative">
        <svg class="absolute h-full w-full overflow-visible">
            <defs>
                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop
                        offset="0%"
                        style={{ stopColor: "#DC3A2B", stopOpacity: 1 }}></stop>
                    <stop
                        offset="100%"
                        style={{ stopColor: "#E18510", stopOpacity: 1 }}></stop>
                </linearGradient>
            </defs>
            <path
                id="border-path"
                fill="none"
                stroke="url(#gradient)"
                stroke-width="4"></path>
        </svg>

        <p id="anim-p" class="p-6 text-lg">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
            eiusmod tempor incididunt ut labore et dolore magna aliqua. Potenti
            nullam ac tortor vitae. Tortor id aliquet lectus proin nibh nisl
            condimentum id venenatis. Consectetur libero id faucibus nisl. Risus
            nec feugiat in fermentum posuere urna nec tincidunt. Egestas purus
            viverra accumsan in nisl nisi scelerisque eu. <br />
            <br />
             Et magnis dis parturient montes nascetur ridiculus mus mauris
            vitae. Elementum integer enim neque volutpat ac tincidunt vitae
            semper quis. Eget egestas purus viverra accumsan. Donec massa sapien
            faucibus et molestie ac. Lorem ipsum dolor sit amet consectetur.
            Placerat duis ultricies lacus sed turpis tincidunt id. Eget mi proin
            sed libero. Tellus at urna condimentum mattis pellentesque. Massa
            tincidunt nunc pulvinar sapien et ligula. Tellus rutrum tellus
            pellentesque eu tincidunt tortor aliquam nulla. Sem integer vitae
            justo eget. Justo nec ultrices dui sapien eget. Dis parturient
            montes nascetur ridiculus. Justo donec enim diam vulputate ut
            pharetra. Viverra orci sagittis eu volutpat odio facilisis. Sem et
            tortor consequat id porta nibh venenatis.<br />
            <br />
             Consequat interdum varius sit amet mattis vulputate enim nulla
            aliquet. Adipiscing commodo elit at imperdiet dui accumsan. Nulla
            aliquet porttitor lacus luctus accumsan tortor posuere. Vitae turpis
            massa sed elementum tempus. Pharetra massa massa ultricies mi quis.
            Odio aenean sed adipiscing diam donec adipiscing tristique risus.
            Non nisi est sit amet facilisis. Vestibulum lectus mauris ultrices
            eros in cursus turpis massa tincidunt. Fermentum et sollicitudin ac
            orci phasellus egestas tellus rutrum. Tellus at urna condimentum
            mattis pellentesque id nibh tortor id. Volutpat est velit egestas
            dui.
        </p>
    </div>

    <div class="flex justify-center pt-12 text-center mb-12 xl:gap-16">
        <div class="w-32">
            <h2>Art Posts</h2>
            <p id="art-counter" class="text-xl font-bold">85</p>
        </div>
        <div class="w-32">
            <h2>Youtube</h2>
            <p id="youtube-counter" class="text-xl font-bold">1.2m</p>
        </div>
        <div class="w-32">
            <h2>Reviews</h2>
            <p id="reviews-counter" class="text-xl font-bold">50</p>
        </div>
    </div>
</div>

<div class="mt-12 h-4 w-full bg-black"></div>

<style>
    #border-path {
        animation: draw 1s forwards 1s ease-out;
    }
    @keyframes draw {
        to {
            stroke-dashoffset: 0;
        }
    }
</style>

<script>
    function updatePath() {
        const textMain = document.querySelector("#anim-p") as HTMLElement;
        const path = document.querySelector("#border-path") as SVGPathElement;

        if (textMain && path) {
            path.setAttribute(
                "d",
                `M0,0 V${textMain.offsetHeight} H${textMain.offsetWidth} v${
                    textMain.offsetHeight / 2
                }`
            );
        }
        const pathLength = path.getTotalLength();
        path.style.strokeDasharray = pathLength.toString();
        path.style.strokeDashoffset = pathLength.toString();
    }

    function incrementCounter(
        selector: string,
        current: number,
        target: number,
        duration: number,
        letter: string = ""
    ) {
        let counter = document.getElementById(selector);
        let stepTime = Math.abs(Math.floor(duration / target));
        if (current < target && counter) {
            current++;
            counter.innerText = current.toString() + letter;
            setTimeout(
                () =>
                    incrementCounter(
                        selector,
                        current,
                        target,
                        duration,
                        letter
                    ),
                stepTime
            );
        }
    }

    // Increment
    incrementCounter("art-counter", 0, 85, 1000);
    incrementCounter("youtube-counter", 0, 320, 1000, 'k');
    incrementCounter("reviews-counter", 0, 250, 1000);

    window.addEventListener("DOMContentLoaded", updatePath);
    window.addEventListener("resize", updatePath);
</script>
